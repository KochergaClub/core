fragment WagtailBlockValidationError on WagtailBlockValidationError {
  block_id
  error_message
}

fragment WagtailStreamFieldValidationError on WagtailStreamFieldValidationError {
  non_block_error
  block_errors {
    ...WagtailBlockValidationError
  }
}

mutation WagtailSavePage($input: WagtailEditPageBodyBlocksInput!) {
  result: wagtailEditPageBodyBlocks(input: $input) {
    page {
      id
    }
    validation_error {
      ...WagtailStreamFieldValidationError
    }
  }
}

query WagtailBlockStructure($name: String!) {
  result: wagtailBlockStructure(input: { name: $name }) {
    label
    ... on WagtailListBlockStructure {
      child_block {
        label
        ... on WagtailStructBlockStructure {
          child_blocks {
            name
            definition {
              label
            }
          }
        }
      }
    }
    ... on WagtailStructBlockStructure {
      child_blocks {
        name
        definition {
          label
          ... on WagtailListBlockStructure {
            child_block {
              label
              ... on WagtailStructBlockStructure {
                child_blocks {
                  name
                  definition {
                    label
                  }
                }
              }
            }
          }
          ... on WagtailStructBlockStructure {
            child_blocks {
              name
              definition {
                label
              }
            }
          }
        }
      }
    }
  }
}
