fragment TrainingForPicker on RatioTraining {
  id
  slug
  name
}

fragment RatioPayment on RatioPayment {
  id
  amount
  payment_type
  status
  fiscalization_status
}

fragment RatioTicket on RatioTicket {
  id
  email
  first_name
  last_name
  payment_amount
  status
  ticket_type
  registration_date
  payments {
    ...RatioPayment
  }
}

fragment RatioTraining on RatioTraining {
  id
  slug
  name
  date
  telegram_link
  tickets_count
  total_income
  tickets {
    ...RatioTicket
  }
}

fragment RatioTrainer on RatioTrainer {
  id
  short_name
  long_name
}

fragment Activity on RatioActivity {
  id
  time
  activity_type
  name
  location
  trainer {
    ...RatioTrainer
  }
}

fragment TrainingDay on RatioTrainingDay {
  id
  date
  activities {
    ...Activity
  }
}

fragment TrainingWithSchedule on RatioTraining {
  ...RatioTraining
  schedule {
    ...TrainingDay
  }
}

query RatioTrainings($before: String, $after: String, $first: Int, $last: Int) {
  trainings: ratioTrainings(
    before: $before
    after: $after
    first: $first
    last: $last
  ) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...RatioTraining
      }
    }
  }
}

query RatioTrainingsForPicker(
  $before: String
  $after: String
  $first: Int
  $last: Int
) {
  trainings: ratioTrainings(
    before: $before
    after: $after
    first: $first
    last: $last
  ) {
    pageInfo {
      ...PageInfo
    }
    edges {
      node {
        ...TrainingForPicker
      }
    }
  }
}

query RatioTrainingBySlug($slug: String!) {
  training: ratioTrainingBySlug(slug: $slug) {
    ...RatioTraining
  }
}

query RatioTrainingWithSchedule($slug: String!) {
  training: ratioTrainingBySlug(slug: $slug) {
    ...TrainingWithSchedule
  }
}

query RatioTrainers {
  trainers: ratioTrainersAll {
    ...RatioTrainer
  }
}

query RatioTrainingEmailPrototype($training_id: ID!, $type: String!) {
  content: ratioTrainingEmailPrototype(training_id: $training_id, type: $type)
}

mutation RatioAddTraining($params: RatioAddTrainingInput!) {
  ratioAddTraining(params: $params) {
    ...RatioTraining
  }
}

mutation RatioAddTicket($params: RatioAddTicketInput!) {
  ratioAddTicket(input: $params) {
    ...RatioTicket
  }
}

mutation RatioPaymentAdd($params: RatioPaymentAddInput!) {
  ratioPaymentAdd(input: $params) {
    payment {
      ...RatioPayment
    }
  }
}

mutation RatioPaymentDelete($payment_id: ID!) {
  ratioPaymentDelete(payment_id: $payment_id) {
    ok
  }
}

mutation RatioPaymentSetStatus($input: RatioPaymentSetStatusInput!) {
  ratioPaymentSetStatus(input: $input) {
    payment {
      ...RatioPayment
    }
  }
}

mutation RatioPaymentFiscalize($payment_id: ID!) {
  ratioPaymentFiscalize(payment_id: $payment_id)
}

mutation RatioPaymentFiscalizedManually($payment_id: ID!) {
  ratioPaymentFiscalizedManually(payment_id: $payment_id) {
    payment {
      ...RatioPayment
    }
  }
}

mutation RatioTrainingAddDay($params: RatioTrainingAddDayInput!) {
  ratioTrainingAddDay(params: $params)
}

mutation RatioTrainingCopyScheduleFrom(
  $params: RatioTrainingCopyScheduleFromInput!
) {
  ratioTrainingCopyScheduleFrom(params: $params)
}

mutation RatioTrainingSendEmail($input: RatioTrainingSendEmailInput!) {
  email: ratioTrainingSendEmail(input: $input) {
    draft_link
  }
}

mutation RatioTrainingSyncParticipantsToMailchimp($training_id: ID!) {
  ratioTrainingSyncParticipantsToMailchimp(training_id: $training_id)
}
