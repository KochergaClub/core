{% extends 'base.html' %}

{% block title %}{{name}}{% endblock %}

{% block content %}
<style>
 .ratio-schedule {
   text-align: center;
 }

 @media print {
   .ratio-schedule-control {
     display: none;
   }

   .ratio-schedule-day-footer {
     position: fixed;
     bottom: 0;
     width: 100%;
   }
 }

 .ratio-schedule hr {
   margin: 32px 0;
   height: 1px;
   border: 0;
   border-top: 1px solid #ddd;
 }

 .ratio-schedule-day {
   page-break-after: always;
 }
 .ratio-schedule-day-header {
   font-size: 32px;
   font-weight: bold;
 }

 .ratio-schedule-section {
   margin-bottom: 32px;
 }
 .ratio-schedule-section > time {
   font-style: italic;
   font-size: 24px;
 }
 .ratio-schedule-section > header {
   font-size: 24px;
   font-weight: 600;
   margin: 8px 0;
 }
 .ratio-schedule-bonus {
   font-size: 24px;
 }
 .ratio-schedule-break {
   font-style: italic;
   color: #666;
   margin-top: 32px;
   margin-bottom: 32px;
 }

 .ratio-schedule-day-footer {
   display: flex;
   align-items: center;
   justify-content: space-between;
   color: #666;
 }
 .ratio-schedule-day-footer--branding {
   display: flex;
   align-items: center;
   font-family: Intro;
 }
 .ratio-schedule-day-footer--branding img {
   height: 32px;
   margin-right: 8px;
 }
</style>
<div class="ratio-schedule">
  <header class="ratio-schedule-control">
    <h1>
      <a href="{{ url('ratio:training', kwargs={'name': name}) }}">
        {{ name }}
      </a>
    </h1>
    <a href="{{ url('admin:ratio_training_change', args=[name]) }}">(Редактировать расписание)</a>
  </header>

  {% for day, activities in schedule_by_day.items() %}
  <section class="ratio-schedule-day">
  <header class="ratio-schedule-day-header">День {{ day }}</header>
  <hr>

  {% for activity in activities %}

    {% if activity.activity_type == 'section' %}
    <section class="ratio-schedule-section">
      <time>{{ activity.time.strftime('%H:%M') }}</time>
      <header>{{ activity.name }}</header>
      <div>[{{ activity.trainer }}]</div>
    </section>
    {% elif activity.activity_type == 'break' %}
    <section class="ratio-schedule-break">
      <hr>
      (<time>{{ activity.time.strftime('%H:%M') }}</time> {{ activity.name }})
      <hr>
    </section>
    {% elif activity.activity_type == 'bonus' %}
    <section class="ratio-schedule-bonus">
      Бонус. {{ activity.name }}
    </section>
    {% endif %}

  {% endfor %}

    <footer class="ratio-schedule-day-footer">
      <div class="ratio-schedule-day-footer--branding">
        <img src="{{ static('logo.png') }}">
        <div>Кочерга</div>
      </div>
      <div>{{ long_name }}</div>
    </footer>
  </section>
  {% endfor %}

</div>
{% endblock %}
